{{ define "main" }}
<div class="container">
  <section class="page-header--c">
    <h1 class="page-header-title">{{ .Title }}</h1>
  </section>
</div>
<section class="generic-single">
  <div class="single-container{{ if eq .Title "Roadmap"}} large{{ end }} markdown">
    <style>
      .TableOfContents {
        margin: 1em 0;
        padding: 1em;
        border: 2px solid #999;
        background: #ffffff;
        border-radius: 3px;
      }
      .TableOfContents ol,.TableOfContents li {
        text-align: left;
      }
    </style>
    <ul class="list-unstyled list-inline">
    {{- $slides := .Params.slides -}}
    {{- $formats := slice "print" "presentation" }}
    {{- range $id, $value := where (where .OutputFormats "Rel" "alternate") ".Format.BaseName" "in" $formats }}
      {{ if eq $id 0 }}
      >&nbsp;
      {{- else }}
      {{- if $slides }}&nbsp;-&nbsp;{{ end }}
      {{ end }}
      {{- if (eq .Format.BaseName "print") }}<li><a href="{{ .Permalink | safeURL }}">Lien vers la version à imprimer</a></li>{{ end }}
      {{- if $slides }}{{- if (eq .Format.BaseName "presentation") }}<li><a href="{{ .Permalink | safeURL }}">Lien vers la version présentation</a></li>{{ end }}{{ end -}}
    {{- end }}
    </ul>
    <div class="TableOfContents">
    <h4 class="m-0">Table des matières</h4>
    {{ .TableOfContents }}
    </div>
    {{ partialCached "content.html" .Content .Content }}
    {{ if eq .Type "modules" }}
      {{ $ctx := . }}
      {{- with $ctx.Params.sorte -}}
        <p><strong>Type :</strong> {{ . }}</p>
      {{- end -}}
      {{- with $ctx.Description -}}
        <p class="m0"><strong>Description</strong></p>
        {{ . | markdownify }}
      {{- end -}}
      <div class="project-list-footer">
      {{- with $ctx.Params.skills -}}
        <p><strong>Compétences :</strong> {{ delimit . ", " }}</p>
      {{- end -}}
      {{- if and $ctx.Params.persons $ctx.Params.days -}}
        <p><strong>Nombre de personnes à mobiliser :</strong> {{ $ctx.Params.persons }} personnes pendant {{ $ctx.Params.days }} jours</p>
      {{- end -}}
      {{- if and $ctx.Params.persons $ctx.Params.days -}}
        <p><strong>Coût :</strong> {{ lang.FormatNumberCustom 0 (mul $ctx.Params.days 833.3333) }} euros</p>
      {{- end -}}
      {{- with $ctx.Params.profil -}}
        <p><strong>Répartition du temps par profil :</strong></p>
        <ul>
        {{ range $key, $value := . }}
          <li>{{ $key | humanize }}: {{ $value }}%</li>
        {{ end }}
        </ul>
      {{- end -}}
      {{- with $ctx.Params.workshops -}}
        <p>
            <strong>Ateliers potentiels :</strong>
            <ul>
            {{ range . }}
              {{ range (where (where $.Site.RegularPages "Section" "workshops") "Title" .) }}
                <li>
                  <a href="{{ .Permalink }}">{{ .Title }}</a><br>
                  <span>{{ .Description }}</span>
                </li>
              {{ end }}
            {{ end }}
          </ul>
        </p>
      {{- end -}}
      {{- with $ctx.Params.urls -}}
      <p>
        <strong>Pour aller plus loin :</strong>
        <ul>
        {{ range . }}
          <li>{{ . | markdownify }}</li>
        {{ end }}
        </ul>
      </p>
      {{ end }}
    {{ end }}
    {{- with .Params.resources -}}
      {{ range . }}
      <h3>{{ .topic }}</h3>
      <p>
        {{ with .urls }}
        <ul>
          {{ range . }}
            {{- $url := .url -}}
            <li><a href="{{ .url }}">{{ with .name }}{{ . }}{{ else }}{{ $url }}{{ end }}</a></li>
          {{ end }}
        </ul>
        {{ end }}
      </p>
      {{ end }}
    {{ end }}
  </div>
</section>
{{- end -}}
